PROCESSOR 16F877A
#include <xc.inc>
; CONFIGURATION WORD PG 144 datasheet
CONFIG CP=OFF ; PFM and Data EEPROM code protection disabled
CONFIG DEBUG=OFF ; Background debugger disabled
CONFIG WRT=OFF
CONFIG CPD=OFF
CONFIG WDTE=OFF ; WDT Disabled; SWDTEN is ignored
CONFIG LVP=ON ; Low voltage programming enabled, MCLR pin, MCLRE ignored
CONFIG FOSC=XT
CONFIG PWRTE=ON
CONFIG BOREN=OFF
PSECT udata_bank0
    
   
    
max:
DS 1 ;reserve 1 byte for max
tmp:
DS 1 ;reserve 1 byte for tmp
PSECT resetVec,class=CODE,delta=2
resetVec:
    PAGESEL INISYS ;jump to the main routine
    goto INISYS
    






INISYS:
    bcf		STATUS,6	;BK1
    bsf		STATUS,5
    
    bsf		TRISB, 0	        ;PORT (B0) S1 ENTRADA
    bsf		TRISB, 1		;PORT (B1) S2 ENTRADA
    bsf		TRISB, 2		;PORT (B2) S3 ENTRADA
    bsf		TRISB, 3		;PORT (B3) S4 ENTRADA
    bsf		TRISB, 4		;PORT (B4) S5 ENTRADA
    
    bcf		TRISD, 0	        ;PORT (D0) MA1 SALIDA
    bcf		TRISD, 1		;PORT (D1) MA2 SALIDA
    bcf		TRISD, 2		;PORT (D2) MB1 SALIDA
    bcf		TRISD, 3		;PORT (D3) MB2 SALIDA
    bcf		TRISD, 4		;PORT (D4) LAI SALIDA
    bcf		TRISD, 5		;PORT (D5) LAD SALIDA
    bcf		TRISD, 6		;PORT (D6) LRSTP SALIDA	
    bcf		TRISD, 7		;PORT (D6) LRSTP SALIDA	
    

    ;*************************     
    BCF STATUS, 5 ; BK0 
   
    
    
   MAIN:
   
   BTFSS PORTB,0
   GOTO INSTRUCCION1 ;0
   GOTO INSTRUCCION2 ;1
   
   INSTRUCCION1:
    
    BTFSS PORTB,1
    GOTO INSTRUCCION3 ;00
    GOTO INSTRUCCION4 ;01
    
   INSTRUCCION3:
    
    BTFSS PORTB,2
    GOTO INSTRUCCION6 ;000
    GOTO INSTRUCCION5 ;001
   
   INSTRUCCION6:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION7 ;0000
    GOTO INSTRUCCION7 ;0001
    
    INSTRUCCION7:
    
    MOVLW 111B
    MOVWF PORTD
    GOTO MAIN
    
    INSTRUCCION5:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION8 ;0010
    GOTO INSTRUCCION8 ;0011
    
    INSTRUCCION8:
    
    MOVLW 110B
    MOVWF PORTD
    GOTO MAIN
    
    INSTRUCCION4:
    
    BTFSS PORTB,2
    GOTO INSTRUCCION9 ;010
    GOTO INSTRUCCION10 ;011
    
    INSTRUCCION9:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION11 ;0100
    GOTO INSTRUCCION11 ;0101
    
    INSTRUCCION11:
    
    MOVLW 101B
    MOVWF PORTD
    GOTO MAIN
    
    INSTRUCCION10:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION12 ;0110
    GOTO INSTRUCCION12 ;0111
    
    INSTRUCCION12:
    
    MOVLW 100B
    MOVWF PORTD
    GOTO MAIN
   
    INSTRUCCION2:
    
    BTFSS PORTB,1
    GOTO INSTRUCCION13 ;10
    GOTO INSTRUCCION14 ;11
     
    INSTRUCCION13:
    
    BTFSS PORTB,2 
    GOTO INSTRUCCION15 ;100
    GOTO INSTRUCCION16 ;101
    
    INSTRUCCION15:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION17 ;1000
    GOTO INSTRUCCION17 ;1001
    
    INSTRUCCION17:
    
    MOVLW 011B
    MOVWF PORTD
    GOTO MAIN
    
   INSTRUCCION16:
    
   BTFSS PORTB,3
   GOTO INSTRUCCION18 ;1010
   GOTO INSTRUCCION18 ;1011
   
   INSTRUCCION18:
    
   MOVLW 010B
   MOVWF PORTD
   GOTO MAIN 
   
   INSTRUCCION14:
    
   BTFSS PORTB,2
   GOTO INSTRUCCION19 ;110
   GOTO INSTRUCCION20 ;111
   
   INSTRUCCION19:
   BTFSS PORTB,3
   GOTO INSTRUCCION21 ;1100
   GOTO INSTRUCCION21 ;1101

   INSTRUCCION21:
    
   MOVLW 001B
    MOVWF PORTD
    GOTO MAIN 

    INSTRUCCION20:
    
    BTFSS PORTB,3
    GOTO INSTRUCCION22 ;1110 
    GOTO INSTRUCCION22 ;1111
    
    INSTRUCCION22:
    
    MOVLW 000B
    MOVWF PORTD
    GOTO MAIN
    
    